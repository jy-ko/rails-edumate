<div class="container fill pt-3">
  <% if @user == current_user %>
  <h1>Hello, <%= @user.first_name %></h1>
  <% else %>
  <h1><%= user_full_name(@user) %></h1>
  <% end %>

  <% if @user == current_user %>
    <% article = "My" %>
  <% else %>
    <% article = "Their" %>
  <% end %>

  <h4 class="pt-3 pb-3"><%= article %> Bookings</h4>

  <!-- sort user lessons by time, reverse order  -->
  <p><%= article %> Upcoming Lessons</p>
  <% @user.bookings.sort_by { |booking| booking.lesson[:time] }.reverse.each do |booking| %>
    <% if booking.lesson.time.to_f > Time.now.to_f %>
          <%= render 'lessons/card', lesson: booking.lesson %>
    <% end %>
  <% end %>

  <p><%= article %> Past Lessons</p>
  <% @user.bookings.sort_by { |booking| booking.lesson[:time] }.reverse.each do |booking| %>
      <% if booking.lesson.time.to_f < Time.now.to_f %>
        <%= render 'lessons/card', lesson: booking.lesson %>
      <% end %>
  <% end %>
</div>
